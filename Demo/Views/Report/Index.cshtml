@model Demo.Models.ReportVM
@{
    ViewBag.Title = "Reports";
}

<div class="page-container">
    <h2 class="page-title">招聘数据报告</h2>

    <div class="container">
        <div class="box">
            <h3 class="chart-title">投递来源占比</h3>
            <canvas id="sourcePieChart"></canvas>
        </div>
        <div class="box">
            <h3 class="chart-title">每日投递趋势</h3>
            开始日期: <input type="date" id="startDate">
            结束日期: <input type="date" id="endDate">
            <button id="updateBtn">应用</button>
            <canvas id="applicationsLineChart"></canvas>
        </div>
    </div>

    <div class="table-wrapper">
        <h3 class="table-title">职位招聘数据</h3>
        <table class="report-table">
            <thead>
                <tr>
                    <th>Job Title</th>
                    <th>Apply</th>
                    <th>Hired</th>
                    <th>Recruitment Day</th>
                    <th>Status</th>
                </tr>
            </thead>
            
            <tbody>
                @foreach (var jr in Model.JobReports)
                {
                    <tr>
                        <td>@jr.Job.Title</td>
                        <td>@jr.TotalApplications</td>
                        <td>@jr.TotalHired</td>
                        <td>@jr.RecruitmentDays.ToString("yyyy-MM-dd")</td>
                        <td>
                            @if (jr.IsOpen)
                            {
                                <span class="status status-open">招聘中</span>
                            }
                            else
                            {
                                <span class="status status-closed">已结束</span>
                            }
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>




@section Styles {
    <link rel="stylesheet" href="/css/report.css" />
}

@section Scripts {
    <!-- 引入 Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <script>
        const id = "@Model.UserId";
    </script>

    <script src="~/js/report.js"></script>
}