@model IEnumerable<Demo.Models.JobExperience>

<h2>Career History</h2>

<div id="eCareerHistoryContainer">
    @await Html.PartialAsync("_CareerHistory", Model)
</div>

@if (Model != null && Model.Any())
{
    <div id="careerHistoryContainer" class="career-history-box">
        @foreach (var job in Model)
        {
            <div class="job-entry">
                <p><strong>Job Title:</strong> @job.JobTitle</p>
                <p><strong>Company:</strong> @job.CompanyName</p>
                <p><strong>Start:</strong> @job.StartMonth / @job.StartYear</p>
                @if (job.StillInRole)
                {
                    <p><strong>End:</strong> Present</p>
                }
                else
                {
                    <p><strong>End:</strong> @job.EndMonth / @job.EndYear</p>
                }
                <p><strong>Still in Role:</strong> @(job.StillInRole ? "Yes" : "No")</p>

                <a asp-action="EditCareerHistory"
                   asp-controller="Profile"
                   asp-route-userId="@job.UserId"
                   data-ajax="true"
                   data-ajax-mode="replace"
                   data-ajax-update="#careerHistoryContainer">
                    <button type="button" class="edit-btn">Edit</button>
                </a>
            </div>
        }
    </div>
}
else
{
    <p>No content. Please log in.</p>
}
