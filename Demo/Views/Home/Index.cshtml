@model Demo.Models.HomeVM
@{
    ViewBag.Title = "Job Seeker";
    ViewBag.Active = "Home";
}

<section class="hero-section">
    <div class="hero-content">
        <h1>Find your new job</h1>

        <form id="job-search-form" class="search-form" asp-action="Index">
            <div class="search-field">
                <label for="keyword">What</label>
                <input type="text" id="keyword" name="keyword" placeholder="e.g. Web Developer" />
            </div>

            <div class="search-field">
                <label style="visibility: hidden">Select</label>
                <select asp-for="@Model.CategoryId" asp-items="Model.CategoryOptions" class="form-control">
                    <option value="">Any Classification</option>
                </select>
            </div>

            <div class="search-field">
                <label for="location">Where</label>
                <input type="text" id="location" name="location" placeholder="e.g. Malaysia" />
            </div>

            <div class="search-field search-button-field">
                <label style="visibility: hidden">Search</label>
                <button type="submit" class="search-btn">Search</button>
            </div>
        </form>

        <div id="job-results">
            @* @Html.Partial("_JobListPartial", Model) *@
        </div>
    </div>
</section>

@* <div class="job-container">
    <section class="job-left">
        @foreach (var job in Model)
        {
            <div class="job-card" data-id="@job.Id">
                <h4>@job.Title</h4>
                <p>@job.Location</p>
                <p>@job.Summary</p>
            </div>
        }
    </section>

    <section class="job-right" id="job-details">
        <!-- 默认空白区域 -->
        <p>点击左侧岗位以查看详细信息。</p>
    </section>
</div> *@

<div class="job-container">
    <section class="job-left">
        @foreach (var job in Model.Jobs)
        {
            <div class="job-card" data-id="@job.Id">
                <img src="@job.LogoImageUrl" alt="company image" />
                <h4>@job.Title</h4>
                <p>CompanyName: @job.CompanyName</p>
                <p>Location: @job.Location</p>
                <p>Salary: RM @job.SalaryMin - RM @job.SalaryMax</p>
                <p>Summary: @job.Summary</p>
                <p>@((DateTime.Now - job.CreatedAt).Days) day</p>
            </div>
        }
    </section>

    <section class="job-right" id="job-details">
        <p>点击左侧岗位以查看详细信息。</p>
    </section>
</div>

@section Scripts {
    <script>
        document.querySelectorAll('.job-card').forEach(card => {
            card.addEventListener('click', () => {
                // 1. 移除所有卡片的 active 类
                document.querySelectorAll('.job-card').forEach(c => c.classList.remove('active'));

                // 2. 当前卡片添加 active 类
                card.classList.add('active');

                // 3. 加载详情页面内容
                const jobId = card.getAttribute('data-id');
                fetch(`/Job/Details/${jobId}`)
                    .then(res => res.text())
                    .then(html => {
                        document.getElementById('job-details').innerHTML = html;
                    });
            });
        });
    </script>
}

@section Styles {
    <link rel="stylesheet" href="/css/job.css" />
    <link rel="stylesheet" href="/css/home.css" />
}

@* <section class="employer-section">
    <div class="section-header">
        <h2>Find your next employer</h2>
    </div>

    <div class="employer-grid">
        <div class="employer-card">
            <div class="employer-logo">
                <img src="~/images/image5.png" alt="Intel">
            </div>
            <button class="job-count">15 jobs</button>
            <a href="/Home/LoadJobs?company=intel"
               data-ajax="true"
               data-ajax-method="GET"
               data-ajax-mode="replace"
               data-ajax-update="job-list">
            </a>
        </div>

        <div class="employer-card">
            <div class="employer-logo">
                <img src="~/images/image4.png" alt="Lazada">
            </div>
            <button class="job-count">20 jobs</button>
            <a href="/Home/LoadJobs?company=Lazada"
               data-ajax="true"
               data-ajax-method="GET"
               data-ajax-mode="replace"
               data-ajax-update="job-list">
            </a>
        </div>

        <div class="employer-card">
            <div class="employer-logo">
                <img src="~/images/image3.png" alt="Google">
            </div>
            <button class="job-count">5 jobs</button>
            <a href="/Home/LoadJobs?company=google"
               data-ajax="true"
               data-ajax-method="GET"
               data-ajax-mode="replace"
               data-ajax-update="job-list">
            </a>
        </div>
    </div>

    <div id="job-list">
        This is where the job list will be loaded via AJAX
    </div>

    <div class="section-footer">
        <a href="#" class="see-more-link">See More</a>
        <a href="#" class="view-all-link">View All Jobs</a>
    </div>
</section> *@

